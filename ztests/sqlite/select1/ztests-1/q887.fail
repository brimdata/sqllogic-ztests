# Failed due to: https://github.com/brimdata/super/issues/6013
script: |
  super -f tsv -I q887.sql > q887.out

inputs:
  - name: q887.sql
    data: |
      SELECT a+b*2+c*3+d*4+e*5,
      CASE WHEN a<b-3 THEN 111 WHEN a<=b THEN 222
      WHEN a<b+3 THEN 333 ELSE 444 END,
      a+b*2+c*3,
      CASE a+1 WHEN b THEN 111 WHEN c THEN 222
      WHEN d THEN 333  WHEN e THEN 444 ELSE 555 END,
      c-d,
      (SELECT count(*) FROM t1 AS x WHERE x.c>t1.c AND x.d<t1.d)
      FROM t1
      ORDER BY 3,5,1,4,2,6;
  - name: t1

outputs:
  - name: q887.out
    data: |
      1529	444	610	555	1	0
      1612	333	635	333	-2	0
      1680	222	674	111	-1	0
      1757	222	708	333	3	0
      1826	222	738	333	1	0
      1902	222	760	333	-3	0
      1985	333	793	444	1	0
      2046	222	827	111	1	0
      2131	222	851	111	1	0
      2202	444	880	555	-1	0
      2281	333	905	333	-4	0
      2349	333	940	555	-1	0
      2432	444	966	333	-3	0
      2501	333	1000	333	-3	0
      2579	444	1030	555	1	0
      2654	444	1057	555	-2	0
      2728	333	1096	333	1	0
      2806	333	1121	444	2	0
      2878	222	1158	444	3	0
      2949	333	1180	555	-1	0
      3039	333	1207	222	-1	0
      3114	222	1241	111	1	0
      3175	333	1277	222	2	0
      3260	222	1297	333	-2	0
      3331	222	1338	444	2	0
      3399	333	1360	555	-1	0
      3473	333	1391	555	-2	0
      3553	444	1416	555	-3	0
      3629	444	1455	222	3	0
      3706	111	1484	444	-1	0
