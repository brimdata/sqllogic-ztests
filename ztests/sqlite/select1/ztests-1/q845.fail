# Failed due to: https://github.com/brimdata/super/issues/6013
script: |
  super -f tsv -I q845.sql > q845.out

inputs:
  - name: q845.sql
    data: |
      SELECT d,
      e,
      a+b*2,
      CASE WHEN a<b-3 THEN 111 WHEN a<=b THEN 222
      WHEN a<b+3 THEN 333 ELSE 444 END,
      (SELECT count(*) FROM t1 AS x WHERE x.b<t1.b),
      a+b*2+c*3,
      abs(a)
      FROM t1
      ORDER BY 1,2,7,6,4,3,5;
  - name: t1

outputs:
  - name: q845.out
    data: |
      101	103	304	444	0	610	104
      108	109	317	333	1	635	107
      114	110	335	222	2	674	111
      116	117	351	222	3	708	115
      122	120	369	222	4	738	121
      128	126	385	222	5	760	127
      133	132	391	333	6	793	131
      136	135	416	222	7	827	138
      140	144	428	222	8	851	142
      148	146	439	444	9	880	149
      154	152	455	333	10	905	153
      156	157	475	333	11	940	159
      164	162	483	444	12	966	163
      169	165	502	333	13	1000	168
      171	173	514	444	14	1030	174
      178	177	529	444	15	1057	179
      183	180	544	333	16	1096	182
      185	189	560	333	17	1121	188
      190	192	579	222	18	1158	191
      196	197	595	333	19	1180	199
      203	204	601	333	20	1207	201
      207	209	617	222	21	1241	205
      212	210	635	333	22	1277	213
      217	219	652	222	23	1297	216
      222	221	666	222	24	1338	220
      226	227	685	333	25	1360	229
      233	230	698	333	26	1391	234
      238	237	711	444	27	1416	239
      241	242	723	444	28	1455	243
      248	246	743	111	29	1484	245
