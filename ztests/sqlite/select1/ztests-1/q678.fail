# Failed due to: https://github.com/brimdata/super/issues/6013
script: |
  super -f tsv -I q678.sql > q678.out

inputs:
  - name: q678.sql
    data: |
      SELECT a+b*2+c*3+d*4,
      (SELECT count(*) FROM t1 AS x WHERE x.b<t1.b),
      CASE a+1 WHEN b THEN 111 WHEN c THEN 222
      WHEN d THEN 333  WHEN e THEN 444 ELSE 555 END,
      a+b*2
      FROM t1
      WHERE b>c
      OR EXISTS(SELECT 1 FROM t1 AS x WHERE x.b<t1.b)
      ORDER BY 2,3,1,4;
  - name: t1

outputs:
  - name: q678.out
    data: |
      1067	1	333	317
      1130	2	111	335
      1172	3	333	351
      1226	4	333	369
      1272	5	333	385
      1325	6	444	391
      1371	7	111	416
      1411	8	111	428
      1472	9	555	439
      1521	10	333	455
      1564	11	555	475
      1622	12	333	483
      1676	13	333	502
      1714	14	555	514
      1769	15	555	529
      1828	16	333	544
      1861	17	444	560
      1918	18	444	579
      1964	19	555	595
      2019	20	222	601
      2069	21	111	617
      2125	22	222	635
      2165	23	333	652
      2226	24	444	666
      2264	25	555	685
      2323	26	555	698
      2368	27	555	711
      2419	28	222	723
      2476	29	444	743
