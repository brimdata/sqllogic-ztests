# Failed due to: https://github.com/brimdata/super/issues/6013
script: |
  super -f tsv -I q181.sql > q181.out

vector: true

inputs:
  - name: q181.sql
    data: |
      SELECT (SELECT count(*) FROM t1 AS x WHERE x.c>t1.c AND x.d<t1.d),
      e,
      (SELECT count(*) FROM t1 AS x WHERE x.b<t1.b),
      (a+b+c+d+e)/5,
      CASE WHEN a<b-3 THEN 111 WHEN a<=b THEN 222
      WHEN a<b+3 THEN 333 ELSE 444 END,
      d,
      CASE WHEN c>(SELECT avg(c) FROM t1) THEN a*2 ELSE b*10 END
      FROM t1
      WHERE a>b
      ORDER BY 7,6,5,2,1,3,4;
  - name: t1

outputs:
  - name: q181.out
    data: |
      0	177	15	177	444	178	358
      0	180	16	182	333	183	364
      0	189	17	187	333	185	376
      0	197	19	197	333	196	398
      0	204	20	202	333	203	402
      0	210	22	212	333	212	426
      0	227	25	227	333	226	458
      0	230	26	232	333	233	468
      0	237	27	237	444	238	478
      0	242	28	242	444	241	486
      0	103	0	102	444	101	1000
      0	109	1	107	333	108	1050
      0	132	6	132	333	133	1300
      0	146	9	147	444	148	1450
      0	152	10	152	333	154	1510
      0	157	11	157	333	156	1580
      0	162	12	162	444	164	1600
      0	165	13	167	333	169	1670
      0	173	14	172	444	171	1700
