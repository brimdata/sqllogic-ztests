# Failed due to: https://github.com/brimdata/super/issues/6549
script: |
  super -f tsv -I q90.sql > q90.out

vector: true

inputs:
  - name: q90.sql
    data: |
      SELECT b-c,
      CASE WHEN a<b-3 THEN 111 WHEN a<=b THEN 222
      WHEN a<b+3 THEN 333 ELSE 444 END,
      a+b*2,
      (SELECT count(*) FROM t1 AS x WHERE x.c>t1.c AND x.d<t1.d),
      abs(a),
      c-d,
      d
      FROM t1
      WHERE b>c
      OR d NOT BETWEEN 110 AND 150
      OR (e>c OR e<d)
      ORDER BY 4,6,5,1,3,7,2;
  - name: t1

outputs:
  - name: q90.out
    data: |
      1	333	455	0	153	-4	154
      4	222	385	0	127	-3	128
      -1	444	483	0	163	-3	164
      1	333	502	0	168	-3	169
      1	444	711	0	239	-3	238
      -1	333	317	0	107	-2	108
      -1	444	529	0	179	-2	178
      3	222	652	0	216	-2	217
      1	333	698	0	234	-2	233
      -1	222	335	0	111	-1	114
      -2	444	439	0	149	-1	148
      3	333	475	0	159	-1	156
      3	333	595	0	199	-1	196
      -2	333	601	0	201	-1	203
      3	333	685	0	229	-1	226
      2	111	743	0	245	-1	248
      -2	444	304	0	104	1	101
      1	222	369	0	121	1	122
      -4	333	391	0	131	1	133
      2	222	416	0	138	1	136
      2	222	428	0	142	1	140
      -2	444	514	0	174	1	171
      -3	333	544	0	182	1	183
      -2	222	617	0	205	1	207
      -1	333	560	0	188	2	185
      -3	333	635	0	213	2	212
      -1	222	666	0	220	2	222
      1	222	579	0	191	3	190
      -4	444	723	0	243	3	241
