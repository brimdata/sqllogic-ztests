# Failed due to: https://github.com/brimdata/super/issues/6013
script: |
  super -f tsv -I q459.sql > q459.out

inputs:
  - name: q459.sql
    data: |
      SELECT b,
      CASE a+1 WHEN b THEN 111 WHEN c THEN 222
      WHEN d THEN 333  WHEN e THEN 444 ELSE 555 END,
      d-e,
      abs(a),
      (a+b+c+d+e)/5
      FROM t1
      WHERE d NOT BETWEEN 110 AND 150
      OR e+d BETWEEN a+b-10 AND c+130
      OR EXISTS(SELECT 1 FROM t1 AS x WHERE x.b<t1.b)
      ORDER BY 3,2,1,5,4;
  - name: t1

outputs:
  - name: q459.out
    data: |
      143	111	-4	142	142
      186	444	-4	188	187
      206	111	-2	205	207
      218	333	-2	216	217
      194	444	-2	191	192
      100	555	-2	104	102
      170	555	-2	174	172
      200	222	-1	201	202
      240	222	-1	243	242
      105	333	-1	107	107
      118	333	-1	115	117
      158	555	-1	159	157
      198	555	-1	199	197
      228	555	-1	229	227
      139	111	1	138	137
      130	444	1	131	132
      223	444	1	220	222
      175	555	1	179	177
      236	555	1	239	237
      211	222	2	213	212
      124	333	2	121	122
      129	333	2	127	127
      151	333	2	153	152
      160	333	2	163	162
      249	444	2	245	247
      145	555	2	149	147
      181	333	3	182	182
      232	555	3	234	232
      112	111	4	111	112
      167	333	4	168	167
