# Failed due to: https://github.com/brimdata/super/issues/6013
script: |
  super -f tsv -I q728.sql > q728.out

inputs:
  - name: q728.sql
    data: |
      SELECT CASE a+1 WHEN b THEN 111 WHEN c THEN 222
      WHEN d THEN 333  WHEN e THEN 444 ELSE 555 END,
      a,
      (a+b+c+d+e)/5
      FROM t1
      WHERE EXISTS(SELECT 1 FROM t1 AS x WHERE x.b<t1.b)
      ORDER BY 3,1,2;
  - name: t1

outputs:
  - name: q728.out
    data: |
      333	107	107
      111	111	112
      333	115	117
      333	121	122
      333	127	127
      444	131	132
      111	138	137
      111	142	142
      555	149	147
      333	153	152
      555	159	157
      333	163	162
      333	168	167
      555	174	172
      555	179	177
      333	182	182
      444	188	187
      444	191	192
      555	199	197
      222	201	202
      111	205	207
      222	213	212
      333	216	217
      444	220	222
      555	229	227
      555	234	232
      555	239	237
      222	243	242
      444	245	247
