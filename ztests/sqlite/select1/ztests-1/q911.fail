# Failed due to: https://github.com/brimdata/super/issues/6013
script: |
  super -f tsv -I q911.sql > q911.out

inputs:
  - name: q911.sql
    data: |
      SELECT a+b*2+c*3,
      CASE a+1 WHEN b THEN 111 WHEN c THEN 222
      WHEN d THEN 333  WHEN e THEN 444 ELSE 555 END,
      CASE WHEN c>(SELECT avg(c) FROM t1) THEN a*2 ELSE b*10 END,
      d-e,
      (SELECT count(*) FROM t1 AS x WHERE x.c>t1.c AND x.d<t1.d),
      a
      FROM t1
      ORDER BY 6,4,5,3,2,1;

outputs:
  - name: q911.out
    data: |
      610	555	1000	-2	0	104
      635	333	1050	-1	0	107
      674	111	1120	4	0	111
      708	333	1180	-1	0	115
      738	333	1240	2	0	121
      760	333	1290	2	0	127
      793	444	1300	1	0	131
      827	111	1390	1	0	138
      851	111	1430	-4	0	142
      880	555	1450	2	0	149
      905	333	1510	2	0	153
      940	555	1580	-1	0	159
      966	333	1600	2	0	163
      1000	333	1670	4	0	168
      1030	555	1700	-2	0	174
      1057	555	358	1	0	179
      1096	333	364	3	0	182
      1121	444	376	-4	0	188
      1158	444	382	-2	0	191
      1180	555	398	-1	0	199
      1207	222	402	-1	0	201
      1241	111	410	-2	0	205
      1277	222	426	2	0	213
      1297	333	432	-2	0	216
      1338	444	440	1	0	220
      1360	555	458	-1	0	229
      1391	555	468	3	0	234
      1416	555	478	1	0	239
      1455	222	486	-1	0	243
      1484	444	490	2	0	245
