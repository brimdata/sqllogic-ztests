# Failed due to: https://github.com/brimdata/super/issues/6549
script: |
  super -f tsv -I q318.sql > q318.out

vector: true

inputs:
  - name: q318.sql
    data: |
      SELECT a,
      (SELECT count(*) FROM t1 AS x WHERE x.b<t1.b),
      abs(b-c),
      c,
      a-b,
      abs(a)
      FROM t1
      ORDER BY 6,1,3,5,2,4;
  - name: t1

outputs:
  - name: q318.out
    data: |
      104	0	2	102	4	104
      107	1	1	106	2	107
      111	2	1	113	-1	111
      115	3	1	119	-3	115
      121	4	1	123	-3	121
      127	5	4	125	-2	127
      131	6	4	134	1	131
      138	7	2	137	-1	138
      142	8	2	141	-1	142
      149	9	2	147	4	149
      153	10	1	150	2	153
      159	11	3	155	1	159
      163	12	1	161	3	163
      168	13	1	166	1	168
      174	14	2	172	4	174
      179	15	1	176	4	179
      182	16	3	184	1	182
      188	17	1	187	2	188
      191	18	1	193	-3	191
      199	19	3	195	1	199
      201	20	2	202	1	201
      205	21	2	208	-1	205
      213	22	3	214	2	213
      216	23	3	215	-2	216
      220	24	1	224	-3	220
      229	25	3	225	1	229
      234	26	1	231	2	234
      239	27	1	235	3	239
      243	28	4	244	3	243
      245	29	2	247	-4	245
