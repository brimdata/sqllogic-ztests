# Failed due to: https://github.com/brimdata/super/issues/6013
script: |
  super -f tsv -I q372.sql > q372.out

inputs:
  - name: q372.sql
    data: |
      SELECT CASE WHEN a<b-3 THEN 111 WHEN a<=b THEN 222
      WHEN a<b+3 THEN 333 ELSE 444 END,
      (SELECT count(*) FROM t1 AS x WHERE x.b<t1.b),
      CASE a+1 WHEN b THEN 111 WHEN c THEN 222
      WHEN d THEN 333  WHEN e THEN 444 ELSE 555 END,
      a+b*2+c*3
      FROM t1
      WHERE (e>c OR e<d)
      ORDER BY 4,3,2,1;

outputs:
  - name: q372.out
    data: |
      444	0	555	610
      333	1	333	635
      222	2	111	674
      222	4	333	738
      222	5	333	760
      333	6	444	793
      222	7	111	827
      222	8	111	851
      444	9	555	880
      333	10	333	905
      333	11	555	940
      444	12	333	966
      333	13	333	1000
      444	14	555	1030
      444	15	555	1057
      333	16	333	1096
      333	17	444	1121
      333	19	555	1180
      333	20	222	1207
      222	21	111	1241
      333	22	222	1277
      222	23	333	1297
      222	24	444	1338
      333	25	555	1360
      333	26	555	1391
      444	27	555	1416
      111	29	444	1484
