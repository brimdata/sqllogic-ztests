# Failed due to: https://github.com/brimdata/super/issues/6013
script: |
  super -f tsv -I q79.sql > q79.out

inputs:
  - name: q79.sql
    data: |
      SELECT CASE WHEN a<b-3 THEN 111 WHEN a<=b THEN 222
      WHEN a<b+3 THEN 333 ELSE 444 END,
      d-e,
      b,
      (SELECT count(*) FROM t1 AS x WHERE x.c>t1.c AND x.d<t1.d),
      a-b,
      a,
      e
      FROM t1
      ORDER BY 4,5,1,3,7,6,2;

outputs:
  - name: q79.out
    data: |
      111	2	249	0	-4	245	246
      222	-1	118	0	-3	115	117
      222	2	124	0	-3	121	120
      222	-2	194	0	-3	191	192
      222	1	223	0	-3	220	221
      222	2	129	0	-2	127	126
      222	-2	218	0	-2	216	219
      222	4	112	0	-1	111	110
      222	1	139	0	-1	138	135
      222	-4	143	0	-1	142	144
      222	-2	206	0	-1	205	209
      333	1	130	0	1	131	132
      333	-1	158	0	1	159	157
      333	4	167	0	1	168	165
      333	3	181	0	1	182	180
      333	-1	198	0	1	199	197
      333	-1	200	0	1	201	204
      333	-1	228	0	1	229	227
      333	-1	105	0	2	107	109
      333	2	151	0	2	153	152
      333	-4	186	0	2	188	189
      333	2	211	0	2	213	210
      333	3	232	0	2	234	230
      444	2	160	0	3	163	162
      444	1	236	0	3	239	237
      444	-1	240	0	3	243	242
      444	-2	100	0	4	104	103
      444	2	145	0	4	149	146
      444	-2	170	0	4	174	173
      444	1	175	0	4	179	177
