# Failed due to: https://github.com/brimdata/super/issues/6013
script: |
  super -f tsv -I q419.sql > q419.out

inputs:
  - name: q419.sql
    data: |
      SELECT (a+b+c+d+e)/5,
      CASE WHEN c>(SELECT avg(c) FROM t1) THEN a*2 ELSE b*10 END,
      abs(a),
      a+b*2
      FROM t1
      WHERE EXISTS(SELECT 1 FROM t1 AS x WHERE x.b<t1.b)
      OR c BETWEEN b-2 AND d+2
      ORDER BY 2,4,3,1;

outputs:
  - name: q419.out
    data: |
      177	358	179	529
      182	364	182	544
      187	376	188	560
      192	382	191	579
      197	398	199	595
      202	402	201	601
      207	410	205	617
      212	426	213	635
      217	432	216	652
      222	440	220	666
      227	458	229	685
      232	468	234	698
      237	478	239	711
      242	486	243	723
      247	490	245	743
      102	1000	104	304
      107	1050	107	317
      112	1120	111	335
      117	1180	115	351
      122	1240	121	369
      127	1290	127	385
      132	1300	131	391
      137	1390	138	416
      142	1430	142	428
      147	1450	149	439
      152	1510	153	455
      157	1580	159	475
      162	1600	163	483
      167	1670	168	502
      172	1700	174	514
