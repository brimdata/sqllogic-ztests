# Failed due to: https://github.com/brimdata/super/issues/6013
script: |
  super -f tsv -I q9.sql > q9.out

vector: true

inputs:
  - name: q9.sql
    data: |
      SELECT CASE a+1 WHEN b THEN 111 WHEN c THEN 222
      WHEN d THEN 333  WHEN e THEN 444 ELSE 555 END,
      CASE WHEN a<b-3 THEN 111 WHEN a<=b THEN 222
      WHEN a<b+3 THEN 333 ELSE 444 END,
      a+b*2+c*3+d*4,
      a+b*2+c*3,
      c,
      CASE WHEN c>(SELECT avg(c) FROM t1) THEN a*2 ELSE b*10 END,
      abs(b-c)
      FROM t1
      WHERE EXISTS(SELECT 1 FROM t1 AS x WHERE x.b<t1.b)
      OR b>c
      OR d NOT BETWEEN 110 AND 150
      ORDER BY 4,1,5,2,6,3,7;
  - name: t1

outputs:
  - name: q9.out
    data: |
      555	444	1014	610	102	1000	2
      333	333	1067	635	106	1050	1
      111	222	1130	674	113	1120	1
      333	222	1172	708	119	1180	1
      333	222	1226	738	123	1240	1
      333	222	1272	760	125	1290	4
      444	333	1325	793	134	1300	4
      111	222	1371	827	137	1390	2
      111	222	1411	851	141	1430	2
      555	444	1472	880	147	1450	2
      333	333	1521	905	150	1510	1
      555	333	1564	940	155	1580	3
      333	444	1622	966	161	1600	1
      333	333	1676	1000	166	1670	1
      555	444	1714	1030	172	1700	2
      555	444	1769	1057	176	358	1
      333	333	1828	1096	184	364	3
      444	333	1861	1121	187	376	1
      444	222	1918	1158	193	382	1
      555	333	1964	1180	195	398	3
      222	333	2019	1207	202	402	2
      111	222	2069	1241	208	410	2
      222	333	2125	1277	214	426	3
      333	222	2165	1297	215	432	3
      444	222	2226	1338	224	440	1
      555	333	2264	1360	225	458	3
      555	333	2323	1391	231	468	1
      555	444	2368	1416	235	478	1
      222	444	2419	1455	244	486	4
      444	111	2476	1484	247	490	2
