# Failed due to: https://github.com/brimdata/super/issues/6013
script: |
  super -f tsv -I q1980.sql | sort > q1980.out

inputs:
  - name: q1980.sql
    data: |
      SELECT a+b*2+c*3+d*4,
      a,
      e,
      CASE WHEN a<b-3 THEN 111 WHEN a<=b THEN 222
      WHEN a<b+3 THEN 333 ELSE 444 END,
      (SELECT count(*) FROM t1 AS x WHERE x.b<t1.b),
      a+b*2+c*3
      FROM t1
      WHERE b>c
      OR d>e;
  - name: t1

outputs:
  - name: q1980.out
    data: |
      1226	121	NULL	222	2	738
      1272	127	126	222	3	760
      1325	131	132	333	4	793
      1371	138	135	222	5	827
      1411	142	144	222	6	851
      1622	163	162	444	10	966
      1828	182	180	333	14	1096
      1918	191	192	222	16	1158
      1964	199	197	333	17	1180
      2125	213	210	333	19	1277
      2165	216	219	222	20	1297
      2226	220	221	222	21	1338
      2264	229	227	333	22	1360
      2323	234	230	333	23	1391
      2476	245	246	111	26	1484
      NULL	153	NULL	333	8	905
      NULL	159	157	333	9	940
      NULL	168	165	333	11	1000
      NULL	239	237	444	24	NULL
      NULL	NULL	110	444	1	NULL
