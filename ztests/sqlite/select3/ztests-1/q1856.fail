# Failed due to: https://github.com/brimdata/super/issues/6013
script: |
  super -f tsv -I q1856.sql | sort > q1856.out

vector: true

inputs:
  - name: q1856.sql
    data: |
      SELECT c,
      (SELECT count(*) FROM t1 AS x WHERE x.b<t1.b),
      CASE WHEN a<b-3 THEN 111 WHEN a<=b THEN 222
      WHEN a<b+3 THEN 333 ELSE 444 END,
      a,
      d,
      a+b*2+c*3+d*4,
      a+b*2
      FROM t1;
  - name: t1

outputs:
  - name: q1856.out
    data: |
      102	0	444	104	101	NULL	NULL
      106	0	333	107	108	1067	317
      113	1	444	NULL	114	NULL	NULL
      119	0	444	115	116	NULL	NULL
      123	2	222	121	122	1226	369
      125	3	222	127	128	1272	385
      134	4	333	131	133	1325	391
      137	5	222	138	136	1371	416
      141	6	222	142	140	1411	428
      147	7	444	149	NULL	NULL	439
      150	8	333	153	NULL	NULL	455
      155	9	333	159	NULL	NULL	475
      161	10	444	163	164	1622	483
      166	11	333	168	NULL	NULL	502
      172	12	444	174	171	1714	514
      176	13	444	179	NULL	NULL	529
      184	14	333	182	183	1828	544
      187	15	333	188	185	1861	560
      193	16	222	191	190	1918	579
      195	17	333	199	196	1964	595
      202	0	444	201	203	NULL	NULL
      208	18	444	NULL	207	NULL	NULL
      214	19	333	213	212	2125	635
      215	20	222	216	217	2165	652
      224	21	222	220	222	2226	666
      225	22	333	229	226	2264	685
      231	23	333	234	233	2323	698
      244	25	444	243	NULL	NULL	723
      247	26	111	245	248	2476	743
      NULL	24	444	239	238	NULL	711
