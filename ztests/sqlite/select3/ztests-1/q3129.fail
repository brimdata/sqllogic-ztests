# Failed due to: https://github.com/brimdata/super/issues/6013
script: |
  super -f tsv -I q3129.sql | sort > q3129.out

inputs:
  - name: q3129.sql
    data: |
      SELECT abs(a),
      a+b*2,
      b,
      d,
      a-b,
      (SELECT count(*) FROM t1 AS x WHERE x.c>t1.c AND x.d<t1.d),
      a+b*2+c*3
      FROM t1
      WHERE (a>b-2 AND a<b+2)
      OR a>b
      ORDER BY 1,4,7;
  - name: t1

outputs:
  - name: q3129.out
    data: |
      107	317	105	108	2	0	635
      131	391	130	133	1	0	793
      138	416	139	136	-1	0	827
      142	428	143	140	-1	0	851
      149	439	145	NULL	4	0	880
      153	455	151	NULL	2	0	905
      159	475	158	NULL	1	0	940
      163	483	160	164	3	0	966
      168	502	167	NULL	1	0	1000
      174	514	170	171	4	0	1030
      179	529	175	NULL	4	0	1057
      182	544	181	183	1	0	1096
      188	560	186	185	2	0	1121
      199	595	198	196	1	0	1180
      213	635	211	212	2	0	1277
      229	685	228	226	1	0	1360
      234	698	232	233	2	0	1391
      239	711	236	238	3	0	NULL
      243	723	240	NULL	3	0	1455
