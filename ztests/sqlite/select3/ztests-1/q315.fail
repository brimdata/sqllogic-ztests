# Failed due to: https://github.com/brimdata/super/issues/6013
script: |
  super -f tsv -I q315.sql | sort > q315.out

inputs:
  - name: q315.sql
    data: |
      SELECT d-e,
      a+b*2+c*3+d*4+e*5,
      a+b*2+c*3,
      d,
      (SELECT count(*) FROM t1 AS x WHERE x.b<t1.b),
      CASE WHEN a<b-3 THEN 111 WHEN a<=b THEN 222
      WHEN a<b+3 THEN 333 ELSE 444 END,
      a+b*2+c*3+d*4
      FROM t1
      ORDER BY 4,3,6;

outputs:
  - name: q315.out
    data: |
      -1	1612	635	108	0	333	1067
      -1	2949	1180	196	17	333	1964
      -1	3399	1360	226	22	333	2264
      -1	NULL	NULL	116	0	444	NULL
      -1	NULL	NULL	203	0	444	NULL
      -2	2579	1030	171	12	444	1714
      -2	2878	1158	190	16	222	1918
      -2	3260	1297	217	20	222	2165
      -4	2131	851	140	6	222	1411
      -4	2806	1121	185	15	333	1861
      1	1985	793	133	4	333	1325
      1	2046	827	136	5	222	1371
      1	3331	1338	222	21	222	2226
      1	NULL	NULL	238	24	444	NULL
      2	1902	760	128	3	222	1272
      2	2432	966	164	10	444	1622
      2	3175	1277	212	19	333	2125
      2	3706	1484	248	26	111	2476
      3	2728	1096	183	14	333	1828
      3	3473	1391	233	23	333	2323
      4	NULL	NULL	114	1	444	NULL
      NULL	NULL	1000	NULL	11	333	NULL
      NULL	NULL	1057	NULL	13	444	NULL
      NULL	NULL	1455	NULL	25	444	NULL
      NULL	NULL	738	122	2	222	1226
      NULL	NULL	880	NULL	7	444	NULL
      NULL	NULL	905	NULL	8	333	NULL
      NULL	NULL	940	NULL	9	333	NULL
      NULL	NULL	NULL	101	0	444	NULL
      NULL	NULL	NULL	207	18	444	NULL
