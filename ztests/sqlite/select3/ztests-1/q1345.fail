# Failed due to: https://github.com/brimdata/super/issues/6013
script: |
  super -f tsv -I q1345.sql | sort > q1345.out

inputs:
  - name: q1345.sql
    data: |
      SELECT a+b*2+c*3+d*4+e*5,
      abs(a),
      (SELECT count(*) FROM t1 AS x WHERE x.c>t1.c AND x.d<t1.d),
      a,
      c,
      CASE WHEN a<b-3 THEN 111 WHEN a<=b THEN 222
      WHEN a<b+3 THEN 333 ELSE 444 END
      FROM t1
      ORDER BY 2,3,4,6,1;
  - name: t1

outputs:
  - name: q1345.out
    data: |
      1612	107	0	107	106	333
      1902	127	0	127	125	222
      1985	131	0	131	134	333
      2046	138	0	138	137	222
      2131	142	0	142	141	222
      2432	163	0	163	161	444
      2579	174	0	174	172	444
      2728	182	0	182	184	333
      2806	188	0	188	187	333
      2878	191	0	191	193	222
      2949	199	0	199	195	333
      3175	213	0	213	214	333
      3260	216	0	216	215	222
      3331	220	0	220	224	222
      3399	229	0	229	225	333
      3473	234	0	234	231	333
      3706	245	0	245	247	111
      NULL	104	0	104	102	444
      NULL	115	0	115	119	444
      NULL	121	0	121	123	222
      NULL	149	0	149	147	444
      NULL	153	0	153	150	333
      NULL	159	0	159	155	333
      NULL	168	0	168	166	333
      NULL	179	0	179	176	444
      NULL	201	0	201	202	444
      NULL	239	0	239	NULL	444
      NULL	243	0	243	244	444
      NULL	NULL	0	NULL	113	444
      NULL	NULL	0	NULL	208	444
