# Failed due to: https://github.com/brimdata/super/issues/6013
script: |
  super -f tsv -I q2548.sql | sort > q2548.out

inputs:
  - name: q2548.sql
    data: |
      SELECT a+b*2+c*3,
      a,
      d,
      a+b*2,
      abs(a),
      (SELECT count(*) FROM t1 AS x WHERE x.b<t1.b),
      (a+b+c+d+e)/5
      FROM t1;
  - name: t1

outputs:
  - name: q2548.out
    data: |
      1000	168	NULL	502	168	11	NULL
      1030	174	171	514	174	12	172
      1057	179	NULL	529	179	13	NULL
      1096	182	183	544	182	14	182
      1121	188	185	560	188	15	187
      1158	191	190	579	191	16	192
      1180	199	196	595	199	17	197
      1277	213	212	635	213	19	212
      1297	216	217	652	216	20	217
      1338	220	222	666	220	21	222
      1360	229	226	685	229	22	227
      1391	234	233	698	234	23	232
      1455	243	NULL	723	243	25	NULL
      1484	245	248	743	245	26	247
      635	107	108	317	107	0	107
      738	121	122	369	121	2	NULL
      760	127	128	385	127	3	127
      793	131	133	391	131	4	132
      827	138	136	416	138	5	137
      851	142	140	428	142	6	142
      880	149	NULL	439	149	7	NULL
      905	153	NULL	455	153	8	NULL
      940	159	NULL	475	159	9	NULL
      966	163	164	483	163	10	162
      NULL	104	101	NULL	104	0	NULL
      NULL	115	116	NULL	115	0	NULL
      NULL	201	203	NULL	201	0	NULL
      NULL	239	238	711	239	24	NULL
      NULL	NULL	114	NULL	NULL	1	NULL
      NULL	NULL	207	NULL	NULL	18	NULL
