# Failed due to: https://github.com/brimdata/super/issues/6013
script: |
  super -f tsv -I q2552.sql | sort > q2552.out

inputs:
  - name: q2552.sql
    data: |
      SELECT c,
      (SELECT count(*) FROM t1 AS x WHERE x.b<t1.b),
      b-c,
      abs(b-c),
      abs(a),
      CASE a+1 WHEN b THEN 111 WHEN c THEN 222
      WHEN d THEN 333  WHEN e THEN 444 ELSE 555 END,
      a+b*2
      FROM t1;
  - name: t1

outputs:
  - name: q2552.out
    data: |
      102	0	NULL	NULL	104	555	NULL
      106	0	-1	1	107	333	317
      113	1	-1	1	NULL	555	NULL
      119	0	NULL	NULL	115	333	NULL
      123	2	1	1	121	333	369
      125	3	4	4	127	333	385
      134	4	-4	4	131	444	391
      137	5	2	2	138	111	416
      141	6	2	2	142	111	428
      147	7	-2	2	149	555	439
      150	8	1	1	153	555	455
      155	9	3	3	159	555	475
      161	10	-1	1	163	333	483
      166	11	1	1	168	555	502
      172	12	-2	2	174	555	514
      176	13	-1	1	179	555	529
      184	14	-3	3	182	333	544
      187	15	-1	1	188	444	560
      193	16	1	1	191	444	579
      195	17	3	3	199	555	595
      202	0	NULL	NULL	201	222	NULL
      208	18	-2	2	NULL	555	NULL
      214	19	-3	3	213	222	635
      215	20	3	3	216	333	652
      224	21	-1	1	220	444	666
      225	22	3	3	229	555	685
      231	23	1	1	234	555	698
      244	25	-4	4	243	222	723
      247	26	2	2	245	444	743
      NULL	24	NULL	NULL	239	555	711
