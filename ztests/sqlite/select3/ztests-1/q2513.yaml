script: |
  super -f tsv -I q2513.sql | sort > q2513.out

vector: true

inputs:
  - name: q2513.sql
    data: |
      SELECT CASE WHEN a<b-3 THEN 111 WHEN a<=b THEN 222
      WHEN a<b+3 THEN 333 ELSE 444 END,
      (a+b+c+d+e)/5,
      d-e,
      e,
      d
      FROM t1
      ORDER BY 3,2,4;
  - name: t1

outputs:
  - name: q2513.out
    data: |
      111	247	2	246	248
      222	127	2	126	128
      222	137	1	135	136
      222	142	-4	144	140
      222	192	-2	192	190
      222	217	-2	219	217
      222	222	1	221	222
      222	NULL	NULL	NULL	122
      333	107	-1	109	108
      333	132	1	132	133
      333	182	3	180	183
      333	187	-4	189	185
      333	197	-1	197	196
      333	212	2	210	212
      333	227	-1	227	226
      333	232	3	230	233
      333	NULL	NULL	157	NULL
      333	NULL	NULL	165	NULL
      333	NULL	NULL	NULL	NULL
      444	162	2	162	164
      444	172	-2	173	171
      444	NULL	-1	117	116
      444	NULL	-1	204	203
      444	NULL	1	237	238
      444	NULL	4	110	114
      444	NULL	NULL	146	NULL
      444	NULL	NULL	177	NULL
      444	NULL	NULL	NULL	101
      444	NULL	NULL	NULL	207
      444	NULL	NULL	NULL	NULL
