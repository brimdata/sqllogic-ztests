# Failed due to: https://github.com/brimdata/super/issues/6013
script: |
  super -f tsv -I q1996.sql | sort > q1996.out

inputs:
  - name: q1996.sql
    data: |
      SELECT a+b*2+c*3,
      abs(a),
      a+b*2,
      b,
      e,
      CASE WHEN c>(SELECT avg(c) FROM t1) THEN a*2 ELSE b*10 END
      FROM t1
      WHERE EXISTS(SELECT 1 FROM t1 AS x WHERE x.b<t1.b);

outputs:
  - name: q1996.out
    data: |
      1000	168	502	167	165	1670
      1030	174	514	170	173	1700
      1057	179	529	175	177	358
      1096	182	544	181	180	364
      1121	188	560	186	189	376
      1158	191	579	194	192	382
      1180	199	595	198	197	398
      1277	213	635	211	210	426
      1297	216	652	218	219	432
      1338	220	666	223	221	440
      1360	229	685	228	227	458
      1391	234	698	232	230	468
      1455	243	723	240	NULL	486
      1484	245	743	249	246	490
      738	121	369	124	NULL	1240
      760	127	385	129	126	1290
      793	131	391	130	132	1300
      827	138	416	139	135	1390
      851	142	428	143	144	1430
      880	149	439	145	146	1450
      905	153	455	151	NULL	1510
      940	159	475	158	157	1580
      966	163	483	160	162	1600
      NULL	239	711	236	237	2360
      NULL	NULL	NULL	112	110	1120
      NULL	NULL	NULL	206	NULL	NULL
