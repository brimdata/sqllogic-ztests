# Failed due to: https://github.com/brimdata/super/issues/6013
script: |
  super -f tsv -I q633.sql | sort > q633.out

inputs:
  - name: q633.sql
    data: |
      SELECT (SELECT count(*) FROM t1 AS x WHERE x.b<t1.b),
      c,
      b,
      (SELECT count(*) FROM t1 AS x WHERE x.c>t1.c AND x.d<t1.d),
      a+b*2+c*3+d*4+e*5,
      (a+b+c+d+e)/5
      FROM t1
      WHERE EXISTS(SELECT 1 FROM t1 AS x WHERE x.b<t1.b);
  - name: t1

outputs:
  - name: q633.out
    data: |
      1	113	112	0	NULL	NULL
      10	161	160	0	2432	162
      11	166	167	0	NULL	NULL
      12	172	170	0	2579	172
      13	176	175	0	NULL	NULL
      14	184	181	0	2728	182
      15	187	186	0	2806	187
      16	193	194	0	2878	192
      17	195	198	0	2949	197
      18	208	206	0	NULL	NULL
      19	214	211	0	3175	212
      2	123	124	0	NULL	NULL
      20	215	218	0	3260	217
      21	224	223	0	3331	222
      22	225	228	0	3399	227
      23	231	232	0	3473	232
      24	NULL	236	0	NULL	NULL
      25	244	240	0	NULL	NULL
      26	247	249	0	3706	247
      3	125	129	0	1902	127
      4	134	130	0	1985	132
      5	137	139	0	2046	137
      6	141	143	0	2131	142
      7	147	145	0	NULL	NULL
      8	150	151	0	NULL	NULL
      9	155	158	0	NULL	NULL
