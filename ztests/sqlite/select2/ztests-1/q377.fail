# Failed due to: https://github.com/brimdata/super/issues/6013
script: |
  super -f tsv -I q377.sql | sort > q377.out

inputs:
  - name: q377.sql
    data: |
      SELECT c-d,
      e,
      a+b*2+c*3+d*4,
      c,
      a,
      (SELECT count(*) FROM t1 AS x WHERE x.b<t1.b)
      FROM t1;
  - name: t1

outputs:
  - name: q377.out
    data: |
      -1	110	NULL	113	NULL	1
      -1	197	1964	195	199	17
      -1	204	NULL	202	201	0
      -1	227	2264	225	229	22
      -1	246	2476	247	245	26
      -2	109	1067	106	107	0
      -2	219	2165	215	216	20
      -2	230	2323	231	234	23
      -3	126	1272	125	127	3
      -3	162	1622	161	163	10
      1	132	1325	134	131	4
      1	135	1371	137	138	5
      1	144	1411	141	142	6
      1	173	1714	172	174	12
      1	180	1828	184	182	14
      1	NULL	1226	123	121	2
      1	NULL	NULL	102	104	0
      1	NULL	NULL	208	NULL	18
      2	189	1861	187	188	15
      2	210	2125	214	213	19
      2	221	2226	224	220	21
      3	117	NULL	119	115	0
      3	192	1918	193	191	16
      NULL	146	NULL	147	149	7
      NULL	157	NULL	155	159	9
      NULL	165	NULL	166	168	11
      NULL	177	NULL	176	179	13
      NULL	237	NULL	NULL	239	24
      NULL	NULL	NULL	150	153	8
      NULL	NULL	NULL	244	243	25
