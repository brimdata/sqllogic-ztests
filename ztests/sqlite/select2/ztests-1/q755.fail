# Failed due to: https://github.com/brimdata/super/issues/6013
script: |
  super -f tsv -I q755.sql | sort > q755.out

inputs:
  - name: q755.sql
    data: |
      SELECT a-b,
      a+b*2+c*3,
      abs(b-c),
      d,
      (a+b+c+d+e)/5,
      (SELECT count(*) FROM t1 AS x WHERE x.b<t1.b),
      CASE WHEN c>(SELECT avg(c) FROM t1) THEN a*2 ELSE b*10 END
      FROM t1
      WHERE b IS NOT NULL;
  - name: t1

outputs:
  - name: q755.out
    data: |
      -1	827	2	136	137	5	1390
      -1	851	2	140	142	6	1430
      -2	1297	3	217	217	20	432
      -2	760	4	128	127	3	1290
      -3	1158	1	190	192	16	382
      -3	1338	1	222	222	21	440
      -3	738	1	122	NULL	2	1240
      -4	1484	2	248	247	26	490
      1	1000	1	NULL	NULL	11	1670
      1	1096	3	183	182	14	364
      1	1180	3	196	197	17	398
      1	1360	3	226	227	22	458
      1	793	4	133	132	4	1300
      1	940	3	NULL	NULL	9	1580
      2	1121	1	185	187	15	376
      2	1277	3	212	212	19	426
      2	1391	1	233	232	23	468
      2	635	1	108	107	0	1050
      2	905	1	NULL	NULL	8	1510
      3	1455	4	NULL	NULL	25	486
      3	966	1	164	162	10	1600
      3	NULL	NULL	238	NULL	24	2360
      4	1030	2	171	172	12	1700
      4	1057	1	NULL	NULL	13	358
      4	880	2	NULL	NULL	7	1450
      NULL	NULL	1	114	NULL	1	1120
      NULL	NULL	2	207	NULL	18	NULL
