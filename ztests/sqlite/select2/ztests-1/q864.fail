# Failed due to: https://github.com/brimdata/super/issues/6013
script: |
  super -f tsv -I q864.sql | sort > q864.out

inputs:
  - name: q864.sql
    data: |
      SELECT CASE a+1 WHEN b THEN 111 WHEN c THEN 222
      WHEN d THEN 333  WHEN e THEN 444 ELSE 555 END,
      (SELECT count(*) FROM t1 AS x WHERE x.b<t1.b),
      c,
      b
      FROM t1
      WHERE e+d BETWEEN a+b-10 AND c+130
      OR b IS NOT NULL;
  - name: t1

outputs:
  - name: q864.out
    data: |
      111	5	137	139
      111	6	141	143
      222	19	214	211
      222	25	244	240
      333	0	106	105
      333	10	161	160
      333	14	184	181
      333	2	123	124
      333	20	215	218
      333	3	125	129
      444	15	187	186
      444	16	193	194
      444	21	224	223
      444	26	247	249
      444	4	134	130
      555	1	113	112
      555	11	166	167
      555	12	172	170
      555	13	176	175
      555	17	195	198
      555	18	208	206
      555	22	225	228
      555	23	231	232
      555	24	NULL	236
      555	7	147	145
      555	8	150	151
      555	9	155	158
