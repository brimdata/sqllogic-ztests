# Failed due to: https://github.com/brimdata/super/issues/6013
script: |
  super -f tsv -I q613.sql | sort > q613.out

inputs:
  - name: q613.sql
    data: |
      SELECT b,
      CASE a+1 WHEN b THEN 111 WHEN c THEN 222
      WHEN d THEN 333  WHEN e THEN 444 ELSE 555 END,
      d,
      a-b,
      a+b*2,
      a+b*2+c*3,
      (SELECT count(*) FROM t1 AS x WHERE x.b<t1.b)
      FROM t1;
  - name: t1

outputs:
  - name: q613.out
    data: |
      105	333	108	2	317	635	0
      112	555	114	NULL	NULL	NULL	1
      124	333	122	-3	369	738	2
      129	333	128	-2	385	760	3
      130	444	133	1	391	793	4
      139	111	136	-1	416	827	5
      143	111	140	-1	428	851	6
      145	555	NULL	4	439	880	7
      151	555	NULL	2	455	905	8
      158	555	NULL	1	475	940	9
      160	333	164	3	483	966	10
      167	555	NULL	1	502	1000	11
      170	555	171	4	514	1030	12
      175	555	NULL	4	529	1057	13
      181	333	183	1	544	1096	14
      186	444	185	2	560	1121	15
      194	444	190	-3	579	1158	16
      198	555	196	1	595	1180	17
      206	555	207	NULL	NULL	NULL	18
      211	222	212	2	635	1277	19
      218	333	217	-2	652	1297	20
      223	444	222	-3	666	1338	21
      228	555	226	1	685	1360	22
      232	555	233	2	698	1391	23
      236	555	238	3	711	NULL	24
      240	222	NULL	3	723	1455	25
      249	444	248	-4	743	1484	26
      NULL	222	203	NULL	NULL	NULL	0
      NULL	333	116	NULL	NULL	NULL	0
      NULL	555	101	NULL	NULL	NULL	0
