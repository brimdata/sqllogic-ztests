script: |
  super -f tsv -I q388.sql | sort > q388.out

vector: true

inputs:
  - name: q388.sql
    data: |
      SELECT CASE WHEN a<b-3 THEN 111 WHEN a<=b THEN 222
      WHEN a<b+3 THEN 333 ELSE 444 END,
      CASE a+1 WHEN b THEN 111 WHEN c THEN 222
      WHEN d THEN 333  WHEN e THEN 444 ELSE 555 END,
      (a+b+c+d+e)/5,
      abs(a),
      d-e,
      b-c,
      a
      FROM t1
      WHERE (a>b-2 AND a<b+2);
  - name: t1

outputs:
  - name: q388.out
    data: |
      222	111	137	138	1	2	138
      222	111	142	142	-4	2	142
      333	333	182	182	3	-3	182
      333	444	132	131	1	-4	131
      333	555	197	199	-1	3	199
      333	555	227	229	-1	3	229
      333	555	NULL	159	NULL	3	159
      333	555	NULL	168	NULL	1	168
