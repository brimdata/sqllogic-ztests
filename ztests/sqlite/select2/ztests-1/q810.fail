# Failed due to: https://github.com/brimdata/super/issues/6013
script: |
  super -f tsv -I q810.sql | sort > q810.out

vector: true

inputs:
  - name: q810.sql
    data: |
      SELECT abs(a),
      CASE WHEN c>(SELECT avg(c) FROM t1) THEN a*2 ELSE b*10 END,
      c,
      e
      FROM t1
      WHERE coalesce(a,b,c,d,e)<>0
      OR EXISTS(SELECT 1 FROM t1 AS x WHERE x.b<t1.b);
  - name: t1

outputs:
  - name: q810.out
    data: |
      104	NULL	102	NULL
      107	1050	106	109
      115	NULL	119	117
      121	1240	123	NULL
      127	1290	125	126
      131	1300	134	132
      138	1390	137	135
      142	1430	141	144
      149	1450	147	146
      153	1510	150	NULL
      159	1580	155	157
      163	1600	161	162
      168	1670	166	165
      174	1700	172	173
      179	358	176	177
      182	364	184	180
      188	376	187	189
      191	382	193	192
      199	398	195	197
      201	402	202	204
      213	426	214	210
      216	432	215	219
      220	440	224	221
      229	458	225	227
      234	468	231	230
      239	2360	NULL	237
      243	486	244	NULL
      245	490	247	246
      NULL	1120	113	110
      NULL	NULL	208	NULL
