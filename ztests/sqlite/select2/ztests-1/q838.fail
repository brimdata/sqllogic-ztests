# Failed due to: https://github.com/brimdata/super/issues/6013
script: |
  super -f tsv -I q838.sql | sort > q838.out

inputs:
  - name: q838.sql
    data: |
      SELECT a+b*2,
      e,
      (SELECT count(*) FROM t1 AS x WHERE x.b<t1.b),
      b,
      c-d
      FROM t1;
  - name: t1

outputs:
  - name: q838.out
    data: |
      317	109	0	105	-2
      369	NULL	2	124	1
      385	126	3	129	-3
      391	132	4	130	1
      416	135	5	139	1
      428	144	6	143	1
      439	146	7	145	NULL
      455	NULL	8	151	NULL
      475	157	9	158	NULL
      483	162	10	160	-3
      502	165	11	167	NULL
      514	173	12	170	1
      529	177	13	175	NULL
      544	180	14	181	1
      560	189	15	186	2
      579	192	16	194	3
      595	197	17	198	-1
      635	210	19	211	2
      652	219	20	218	-2
      666	221	21	223	2
      685	227	22	228	-1
      698	230	23	232	-2
      711	237	24	236	NULL
      723	NULL	25	240	NULL
      743	246	26	249	-1
      NULL	110	1	112	-1
      NULL	117	0	NULL	3
      NULL	204	0	NULL	-1
      NULL	NULL	0	NULL	1
      NULL	NULL	18	206	1
