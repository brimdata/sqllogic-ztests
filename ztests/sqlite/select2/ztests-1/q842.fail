# Failed due to: https://github.com/brimdata/super/issues/6013
script: |
  super -f tsv -I q842.sql | sort > q842.out

inputs:
  - name: q842.sql
    data: |
      SELECT (SELECT count(*) FROM t1 AS x WHERE x.b<t1.b),
      c-d,
      CASE a+1 WHEN b THEN 111 WHEN c THEN 222
      WHEN d THEN 333  WHEN e THEN 444 ELSE 555 END,
      d,
      b
      FROM t1;

outputs:
  - name: q842.out
    data: |
      0	-1	222	203	NULL
      0	-2	333	108	105
      0	1	555	101	NULL
      0	3	333	116	NULL
      1	-1	555	114	112
      10	-3	333	164	160
      11	NULL	555	NULL	167
      12	1	555	171	170
      13	NULL	555	NULL	175
      14	1	333	183	181
      15	2	444	185	186
      16	3	444	190	194
      17	-1	555	196	198
      18	1	555	207	206
      19	2	222	212	211
      2	1	333	122	124
      20	-2	333	217	218
      21	2	444	222	223
      22	-1	555	226	228
      23	-2	555	233	232
      24	NULL	555	238	236
      25	NULL	222	NULL	240
      26	-1	444	248	249
      3	-3	333	128	129
      4	1	444	133	130
      5	1	111	136	139
      6	1	111	140	143
      7	NULL	555	NULL	145
      8	NULL	555	NULL	151
      9	NULL	555	NULL	158
