# Failed due to: https://github.com/brimdata/super/issues/6549
script: |
  super -f tsv -I q866.sql | sort > q866.out

vector: true

inputs:
  - name: q866.sql
    data: |
      SELECT CASE WHEN a<b-3 THEN 111 WHEN a<=b THEN 222
      WHEN a<b+3 THEN 333 ELSE 444 END,
      c,
      abs(a),
      a+b*2+c*3+d*4,
      CASE a+1 WHEN b THEN 111 WHEN c THEN 222
      WHEN d THEN 333  WHEN e THEN 444 ELSE 555 END,
      (SELECT count(*) FROM t1 AS x WHERE x.b<t1.b),
      a-b
      FROM t1;
  - name: t1

outputs:
  - name: q866.out
    data: |
      111	247	245	2476	444	26	-4
      222	123	121	1226	333	2	-3
      222	125	127	1272	333	3	-2
      222	137	138	1371	111	5	-1
      222	141	142	1411	111	6	-1
      222	193	191	1918	444	16	-3
      222	215	216	2165	333	20	-2
      222	224	220	2226	444	21	-3
      333	106	107	1067	333	0	2
      333	134	131	1325	444	4	1
      333	150	153	NULL	555	8	2
      333	155	159	NULL	555	9	1
      333	166	168	NULL	555	11	1
      333	184	182	1828	333	14	1
      333	187	188	1861	444	15	2
      333	195	199	1964	555	17	1
      333	214	213	2125	222	19	2
      333	225	229	2264	555	22	1
      333	231	234	2323	555	23	2
      444	102	104	NULL	555	0	NULL
      444	113	NULL	NULL	555	1	NULL
      444	119	115	NULL	333	0	NULL
      444	147	149	NULL	555	7	4
      444	161	163	1622	333	10	3
      444	172	174	1714	555	12	4
      444	176	179	NULL	555	13	4
      444	202	201	NULL	222	0	NULL
      444	208	NULL	NULL	555	18	NULL
      444	244	243	NULL	222	25	3
      444	NULL	239	NULL	555	24	3
