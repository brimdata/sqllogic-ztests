# Failed due to: https://github.com/brimdata/super/issues/6013
script: |
  super -f tsv -I q839.sql | sort > q839.out

inputs:
  - name: q839.sql
    data: |
      SELECT (SELECT count(*) FROM t1 AS x WHERE x.b<t1.b),
      (a+b+c+d+e)/5,
      b
      FROM t1;
  - name: t1

outputs:
  - name: q839.out
    data: |
      0	107	105
      0	NULL	NULL
      0	NULL	NULL
      0	NULL	NULL
      1	NULL	112
      10	162	160
      11	NULL	167
      12	172	170
      13	NULL	175
      14	182	181
      15	187	186
      16	192	194
      17	197	198
      18	NULL	206
      19	212	211
      2	NULL	124
      20	217	218
      21	222	223
      22	227	228
      23	232	232
      24	NULL	236
      25	NULL	240
      26	247	249
      3	127	129
      4	132	130
      5	137	139
      6	142	143
      7	NULL	145
      8	NULL	151
      9	NULL	158
