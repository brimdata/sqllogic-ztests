# Failed due to: https://github.com/brimdata/super/issues/6549
script: |
  super -f tsv -I q438.sql | sort > q438.out

vector: true

inputs:
  - name: q438.sql
    data: |
      SELECT (a+b+c+d+e)/5,
      a+b*2,
      (SELECT count(*) FROM t1 AS x WHERE x.b<t1.b),
      CASE WHEN a<b-3 THEN 111 WHEN a<=b THEN 222
      WHEN a<b+3 THEN 333 ELSE 444 END,
      a
      FROM t1;
  - name: t1

outputs:
  - name: q438.out
    data: |
      107	317	0	333	107
      127	385	3	222	127
      132	391	4	333	131
      137	416	5	222	138
      142	428	6	222	142
      162	483	10	444	163
      172	514	12	444	174
      182	544	14	333	182
      187	560	15	333	188
      192	579	16	222	191
      197	595	17	333	199
      212	635	19	333	213
      217	652	20	222	216
      222	666	21	222	220
      227	685	22	333	229
      232	698	23	333	234
      247	743	26	111	245
      NULL	369	2	222	121
      NULL	439	7	444	149
      NULL	455	8	333	153
      NULL	475	9	333	159
      NULL	502	11	333	168
      NULL	529	13	444	179
      NULL	711	24	444	239
      NULL	723	25	444	243
      NULL	NULL	0	444	104
      NULL	NULL	0	444	115
      NULL	NULL	0	444	201
      NULL	NULL	1	444	NULL
      NULL	NULL	18	444	NULL
