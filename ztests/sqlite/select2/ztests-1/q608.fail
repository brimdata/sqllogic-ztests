# Failed due to: https://github.com/brimdata/super/issues/6013
script: |
  super -f tsv -I q608.sql | sort > q608.out

inputs:
  - name: q608.sql
    data: |
      SELECT a+b*2+c*3+d*4+e*5,
      abs(a),
      e,
      a+b*2+c*3,
      abs(b-c),
      a-b,
      CASE WHEN a<b-3 THEN 111 WHEN a<=b THEN 222
      WHEN a<b+3 THEN 333 ELSE 444 END
      FROM t1
      WHERE (e>c OR e<d)
      AND EXISTS(SELECT 1 FROM t1 AS x WHERE x.b<t1.b);

outputs:
  - name: q608.out
    data: |
      1902	127	126	760	4	-2	222
      1985	131	132	793	4	1	333
      2046	138	135	827	2	-1	222
      2131	142	144	851	2	-1	222
      2432	163	162	966	1	3	444
      2579	174	173	1030	2	4	444
      2728	182	180	1096	3	1	333
      2806	188	189	1121	1	2	333
      2949	199	197	1180	3	1	333
      3175	213	210	1277	3	2	333
      3260	216	219	1297	3	-2	222
      3331	220	221	1338	1	-3	222
      3399	229	227	1360	3	1	333
      3473	234	230	1391	1	2	333
      3706	245	246	1484	2	-4	111
      NULL	159	157	940	3	1	333
      NULL	179	177	1057	1	4	444
      NULL	239	237	NULL	NULL	3	444
      NULL	NULL	110	NULL	1	NULL	444
