# Failed due to: https://github.com/brimdata/super/issues/6013
script: |
  super -f tsv -I q187.sql | sort > q187.out

vector: true

inputs:
  - name: q187.sql
    data: |
      SELECT a,
      (SELECT count(*) FROM t1 AS x WHERE x.c>t1.c AND x.d<t1.d),
      abs(a),
      CASE WHEN a<b-3 THEN 111 WHEN a<=b THEN 222
      WHEN a<b+3 THEN 333 ELSE 444 END
      FROM t1;
  - name: t1

outputs:
  - name: q187.out
    data: |
      104	0	104	444
      107	0	107	333
      115	0	115	444
      121	0	121	222
      127	0	127	222
      131	0	131	333
      138	0	138	222
      142	0	142	222
      149	0	149	444
      153	0	153	333
      159	0	159	333
      163	0	163	444
      168	0	168	333
      174	0	174	444
      179	0	179	444
      182	0	182	333
      188	0	188	333
      191	0	191	222
      199	0	199	333
      201	0	201	444
      213	0	213	333
      216	0	216	222
      220	0	220	222
      229	0	229	333
      234	0	234	333
      239	0	239	444
      243	0	243	444
      245	0	245	111
      NULL	0	NULL	444
      NULL	0	NULL	444
